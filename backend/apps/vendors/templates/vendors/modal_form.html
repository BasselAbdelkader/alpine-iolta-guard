<form method="post" action="{% url 'vendors:create_modal' %}" autocomplete="off">
    {% csrf_token %}
    
    {% if form.non_field_errors %}
        <div class="alert alert-danger">
            {{ form.non_field_errors }}
        </div>
    {% endif %}
    
    <div class="mb-3">
        <label for="{{ form.vendor_name.id_for_label }}" class="form-label">
            Vendor Name <span class="text-danger">*</span>
        </label>
        {{ form.vendor_name }}
        {% if form.vendor_name.errors %}
            <div class="text-danger">{{ form.vendor_name.errors }}</div>
        {% endif %}
    </div>

    <div class="mb-3">
        <label for="{{ form.contact_person.id_for_label }}" class="form-label">
            Contact Person
        </label>
        {{ form.contact_person }}
        {% if form.contact_person.errors %}
            <div class="text-danger">{{ form.contact_person.errors }}</div>
        {% endif %}
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="mb-3">
                <label for="{{ form.email.id_for_label }}" class="form-label">
                    Email
                </label>
                {{ form.email }}
                {% if form.email.errors %}
                    <div class="text-danger">{{ form.email.errors }}</div>
                {% endif %}
            </div>
        </div>
        <div class="col-md-6">
            <div class="mb-3">
                <label for="{{ form.phone.id_for_label }}" class="form-label">
                    Phone
                </label>
                {{ form.phone }}
                {% if form.phone.errors %}
                    <div class="text-danger">{{ form.phone.errors }}</div>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="mb-3">
        <label for="{{ form.address.id_for_label }}" class="form-label">
            Address
        </label>
        {{ form.address }}
        {% if form.address.errors %}
            <div class="text-danger">{{ form.address.errors }}</div>
        {% endif %}
    </div>

    <div class="row">
        <div class="col-md-4">
            <div class="mb-3">
                <label for="{{ form.city.id_for_label }}" class="form-label">
                    City
                </label>
                {{ form.city }}
                {% if form.city.errors %}
                    <div class="text-danger">{{ form.city.errors }}</div>
                {% endif %}
            </div>
        </div>
        <div class="col-md-4">
            <div class="mb-3">
                <label for="{{ form.state.id_for_label }}" class="form-label">
                    State
                </label>
                {{ form.state }}
                {% if form.state.errors %}
                    <div class="text-danger">{{ form.state.errors }}</div>
                {% endif %}
            </div>
        </div>
        <div class="col-md-4">
            <div class="mb-3">
                <label for="{{ form.zip_code.id_for_label }}" class="form-label">
                    Zip Code
                </label>
                {{ form.zip_code }}
                {% if form.zip_code.errors %}
                    <div class="invalid-feedback d-block">{{ form.zip_code.errors.0 }}</div>
                {% endif %}
            </div>
        </div>
    </div>
    
    <div class="mb-3 d-flex align-items-end">
        <div class="form-check">
            {{ form.is_active }}
            <label class="form-check-label" for="{{ form.is_active.id_for_label }}">
                Active Vendor
            </label>
        </div>
    </div>
    {% if form.is_active.errors %}
        <div class="text-danger">{{ form.is_active.errors }}</div>
    {% endif %}
</form>

<script>
// Auto-format zip code to only allow 5 digits
(function() {
    const zipCodeInput = $('#{{ form.zip_code.id_for_label }}');

    if (zipCodeInput.length) {
        // Remove any existing handler first to avoid duplicates
        zipCodeInput.off('input.zipformat');

        // Add input handler to only allow digits and limit to 5
        zipCodeInput.on('input.zipformat', function(e) {
            let value = this.value.replace(/\D/g, ''); // Remove non-digits

            if (value.length > 5) {
                value = value.substring(0, 5); // Limit to 5 digits max
            }

            this.value = value;
        });
    }
})();
</script>